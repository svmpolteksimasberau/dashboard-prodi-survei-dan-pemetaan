<script>
    // DATABASE RESMI PRODI
    const allowedDosen = {
        "1112099302": "Loryena Ayu Karondia, S.T., M.T.",
        "1109068901": "Syaiful Muflichin Purnama, S.T., M.Eng.",
        "1453779680230023": "Nurya Ramadhania, S.T., M.T.",
        "2434777678230073": "Irma Yusiyanti, S.T., M.Eng",
        "7435774675230242": "Murdawati, S.T., M.Sc.",
        "8960779680230032": "Devika Rahma Damayanti Yusuf, S.T., M.T."
    };

    const allowedMahasiswa = {
        "123": "Sakinah",
        "122": "Iqbal"
    };

    function switchTab(mode) {
        const isLogin = mode === 'login';
        document.getElementById('loginArea').classList.toggle('hidden', !isLogin);
        document.getElementById('registerArea').classList.toggle('hidden', isLogin);
        document.getElementById('tabL').className = isLogin ? "w-1/2 py-3 rounded-xl font-black text-xs uppercase bg-white shadow" : "w-1/2 py-3 rounded-xl font-black text-xs uppercase text-gray-400";
        document.getElementById('tabR').className = !isLogin ? "w-1/2 py-3 rounded-xl font-black text-xs uppercase bg-white shadow" : "w-1/2 py-3 rounded-xl font-black text-xs uppercase text-gray-400";
    }

    // PROSES AKTIVASI (REGISTER)
    document.getElementById('registerForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const id = document.getElementById('regId').value;
        const role = document.getElementById('regRole').value;
        const alertBox = document.getElementById('alertBox');
        
        let namaResmi = (role === 'dosen') ? allowedDosen[id] : allowedMahasiswa[id];

        if (!namaResmi) {
            alertBox.innerText = "❌ ID TIDAK TERDAFTAR DI DATABASE PRODI!";
            alertBox.className = "text-[10px] mt-6 text-center font-black bg-red-50 text-red-600 p-4 rounded-2xl border border-red-100 block";
            return;
        }

        const userData = {
            id: id,
            role: role,
            name: namaResmi, // Nama Sakinah/Iqbal disimpan di sini
            pass: document.getElementById('regPass').value
        };

        localStorage.setItem('user_data_' + id, JSON.stringify(userData));
        alertBox.innerText = "✅ BERHASIL: AKUN " + namaResmi.toUpperCase() + " AKTIF!";
        alertBox.className = "text-[10px] mt-6 text-center font-black bg-green-50 text-green-600 p-4 rounded-2xl border border-green-100 block";
        setTimeout(() => switchTab('login'), 2000);
    });

    // PROSES LOGIN
    document.getElementById('loginForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const id = document.getElementById('logId').value;
        const pass = document.getElementById('logPass').value;
        const savedUser = localStorage.getItem('user_data_' + id);
        const user = savedUser ? JSON.parse(savedUser) : null;

        if (user && user.pass === pass) {
            localStorage.setItem('current_user', JSON.stringify(user));
            window.location.href = 'dashboard.html';
        } else {
            alert("ID atau Password Salah / Belum Aktivasi!");
        }
    });
</script>
