const scriptURL = 'https://script.google.com/macros/s/AKfycbxGaNDSN36le9F818_bbZ3AhZGzcyL6DfbqEwCNBy4zlQpAPqNGZt4KIKyc6f0gWf9Neg/exec';

// Pastikan fungsi fetch mengirim data dengan struktur yang benar
document.getElementById('kpiForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const kat = document.getElementById('kat').value;
    const dsk = document.getElementById('desk').value;

    fetch(scriptURL, {
        method: 'POST',
        body: JSON.stringify({
            type: "KPI",
            id: currentUser.id,
            nama: currentUser.name,
            kategori: kat,
            deskripsi: dsk,
            poin: 5
        })
    })
    .then(response => {
        alert("Data KPI Berhasil Terkirim ke Cloud!");
        // Tambahkan fungsi simpan lokal agar tabel di bawah langsung terisi
        saveToLocal(kat, dsk);
    })
    .catch(error => console.error('Error!', error.message));
});
